// For format details, see https://aka.ms/devcontainer.json.
{
	"name": "main",
	// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
	"image": "mcr.microsoft.com/devcontainers/base:bookworm",

	"features": {
		"ghcr.io/michidk/devcontainers-features/typst:1": {},
		"ghcr.io/guiyomh/features/just:0": {},
		"ghcr.io/devcontainers/features/powershell:1": {},
		"ghcr.io/devcontainers/features/github-cli:1": {}
	},

	"customizations": {
		"vscode": {
			"settings": {
				// Git settings.
				"git.path": "/usr/bin/git",

				// Helps with some annoying warnings in vscode-icons.
				"workbench.iconTheme": "vscode-icons",
				"vsicons.dontShowNewVersionMessage": true,

				// Allow TinyMist to find custom fonts/icons.
				"tinymist.fontPaths": [
					"/workspaces/${workspaceFolderBasename}/assets/fonts"
				]
			},
			"extensions": [
				"myriad-dreamin.tinymist",
				"nefrob.vscode-just-syntax",
				"vscode-icons-team.vscode-icons",
				"streetsidesoftware.code-spell-checker"
			]
		}
	},

	// Install fonts before the first use of the container.
	"onCreateCommand": {
		"dir": "mkdir -p assets/fonts",
		"fira-sans": "wget -O assets/fonts/fira-sans.zip https://www.1001fonts.com/download/fira-sans.zip && unzip -o assets/fonts/fira-sans.zip -d assets/fonts/fira-sans && rm assets/fonts/fira-sans.zip",
		"fontawesome": "wget -O assets/fonts/fontawesome.zip https://use.fontawesome.com/releases/v7.1.0/fontawesome-free-7.1.0-desktop.zip && unzip -o assets/fonts/fontawesome.zip -d assets/fonts && rm assets/fonts/fontawesome.zip"
	}
}